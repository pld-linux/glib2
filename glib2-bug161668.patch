diff -urN glib-2.6.0.orig/glib/goption.c glib-2.6.0/glib/goption.c
--- glib-2.6.0.orig/glib/goption.c	2004-12-19 09:39:35.679706864 +0100
+++ glib-2.6.0/glib/goption.c	2004-12-19 06:20:12.000000000 +0100
@@ -1324,30 +1324,33 @@
 	      
 	    }
 	}
+    }
 
-      /* Call post-parse hooks */
-      list = context->groups;
-      while (list)
-	{
-	  GOptionGroup *group = list->data;
-
-	  if (group->post_parse_func)
-	    {
-	      if (!(* group->post_parse_func) (context, group,
-					       group->user_data, error))
-		goto fail;
-	    }
-	  
-	  list = list->next;
-	}
-
-      if (context->main_group && context->main_group->post_parse_func)
+  /* Call post-parse hooks */
+  list = context->groups;
+  while (list)
+    {
+      GOptionGroup *group = list->data;
+      
+      if (group->post_parse_func)
 	{
-	  if (!(* context->main_group->post_parse_func) (context, context->main_group,
-							 context->main_group->user_data, error))
+	  if (!(* group->post_parse_func) (context, group,
+					   group->user_data, error))
 	    goto fail;
 	}
-
+      
+      list = list->next;
+    }
+  
+  if (context->main_group && context->main_group->post_parse_func)
+    {
+      if (!(* context->main_group->post_parse_func) (context, context->main_group,
+						     context->main_group->user_data, error))
+	goto fail;
+    }
+  
+  if (argc && argv)
+    {
       free_pending_nulls (context, TRUE);
       
       for (i = 1; i < *argc; i++)
